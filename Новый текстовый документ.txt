using System;
using System.Collections.Generic;

namespace lab2
{
    internal class Program
    {
        class Radio
        {
            private bool _state = false;
            public void On() => _state = true;
            public void Off() => _state = false;
            public bool Status() => _state;
        }

        class Car
        {
            private string _name;
            private double _speed = 0;
            private bool _started = false;
            private double _maxspeed;
            private Radio radio;

            public Car(string name, double maxspeed)
            {
                radio = new Radio();
                _name = name;
                _maxspeed = maxspeed;
            }

            public string GetName() => _name;

            public void Start()
            {
                _started = true;
                Console.WriteLine(_name + " is On");
            }

            public void Stop()
            {
                _started = false;
                _speed = 0;
                Console.WriteLine(_name + " is Off");
            }

            public void Speedup(double value)
            {
                if (!_started) 
                { 
                    Console.WriteLine("Сначала заведи машину!"); 
                    return; 
                }

                if (value <= _maxspeed)
                {
                    while (_speed < value - 6)
                    {
                        _speed += 6;
                        Console.WriteLine(_speed.ToString() + " Km/h / " + _name);
                    }
                    _speed = value;
                    Console.WriteLine(_speed.ToString() + " Km/h / " + _name +"!!!");
                }
                else
                {
                    Console.WriteLine("Движок не тянет у" + _name +" максимум: " + _maxspeed.ToString());
                }
            }

            public void Slowdown(double value)
            {
                if (value < 0) value = 0;
                while (value < _speed - 6)
                {
                    _speed -= 6;
                    Console.WriteLine(_speed.ToString() + " Km/h / " + _name);
                }
                _speed = value;
                Console.WriteLine(_speed.ToString() + " Km/h / " + _name + "!!!");
            }

            public void Radio_On() => radio.On();
            public void Radio_Off() => radio.Off();
            public void Radio_Status()
            {
                if (radio.Status() == true)
                {
                    Console.WriteLine(_name + "Radio is On");
                }
                else
                {
                    Console.WriteLine(_name + "Radio is Off");
                }
            }
        }


        class Toyota : Car { public Toyota(string name, double v) : base(name, v) { } }
        class Buggatti : Car { public Buggatti(string name, double v) : base(name, v) { } }
        class Lada : Car { public Lada(string name, double v) : base(name, v) { } }

        static void Main(string[] args)
        {
            List<Car> garage = new List<Car>
            {
                new Toyota("Land Cruiser 200", 280),
                new Buggatti("Veyron", 420),
                new Lada("Vesta", 100)
            };

            while (true)
            {
                Console.Clear();
                Console.WriteLine("ВЫБЕРИТЕ АВТОМОБИЛЬ");
                for (int i = 0; i < garage.Count; i++)
                {
                    Console.WriteLine(i.ToString() + " - " + garage[i].GetName());
                }

                if (!int.TryParse(Console.ReadLine(), out int carChoice)) { 
                    break; 
                }
                
                if (carChoice > garage.Count) continue;

                Car selectedCar = garage[carChoice - 1];
                bool backToGarage = false;

                while (!backToGarage)
                {
                    Console.WriteLine(selectedCar.GetName());
                    Console.WriteLine("1. Завести");
                    Console.WriteLine("2. Разогнаться");
                    Console.WriteLine("3. Притормозить");
                    Console.WriteLine("4. Вкл Радио");
                    Console.WriteLine("5. Выкл Радио");
                    Console.WriteLine("6. Статус Радио");
                    Console.WriteLine("7. Заглушить");
                    Console.WriteLine("0. Назад");
                    Console.Write("Выбор: ");

                    string action = Console.ReadLine();
                    switch (action)
                    {
                        case "1": selectedCar.Start(); break;
                        case "2":
                            Console.Write("Введите скорость: ");
                            double.TryParse(Console.ReadLine(), out double s);
                            selectedCar.Speedup(s);
                            break;
                        case "3":
                            Console.Write("Снизить скорость до: ");
                            double.TryParse(Console.ReadLine(), out double slow);
                            selectedCar.Slowdown(slow);
                            break;
                        case "4":
                            selectedCar.Radio_On();
                            Console.WriteLine("Радио включено.");
                            break;
                        case "5":
                            selectedCar.Radio_Off();
                            Console.WriteLine("Радио выключено.");
                            break;
                        case "6": 
                            selectedCar.Radio_Status(); 
                            break;
                        case "7": 
                            selectedCar.Stop(); 
                            break;
                        case "0": 
                            backToGarage = true; 
                            break;
                        default: Console.WriteLine("Неверный ввод"); break;
                    }
                }
            }
        }
    }
}
